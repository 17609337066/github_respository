<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‰ç«¯ç»„ä»¶åŒ–1-3</title>
  <style>
    body {
      position: fixed;
      height: 100%;
      width: 100%;
    }

    .wrapper {
      height: 100%;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>

<body>
  <div class="wrapper">
    <!-- <button class="like-btn">
      <span class="like-text">ç‚¹èµ</span>
      <span class="pic">ğŸ‘</span>
    </button> -->
  </div>
  <script>
    /* const button = document.querySelector('.like-btn')
    const buttonText = document.querySelector('.like-text')

    let isLiked = false

    button.addEventListener('click',()=>{
      isLiked = !isLiked
      if(isLiked){
        buttonText.innerHTML = 'å–æ¶ˆ'
      }else{
        buttonText.innerHTML = 'ç‚¹èµ'
      }
    },false) */
    /* 
      è¿™ç§å†™æ³•æ²¡æœ‰å¯å¤ç”¨æ€§ï¼ˆå¤ç”¨èµ·æ¥å¾ˆéº»çƒ¦ï¼Œéœ€è¦å¤åˆ¶ç»“æ„å’Œè¡Œä¸ºï¼‰
    */

    // å†™æˆå¯å¤ç”¨çš„ç±»ï¼Œrenderå‡½æ•°è¿”å›æ¨¡æ¿å­—ç¬¦ä¸²ç›´æ¥ç”¨æ¥æ¸²æŸ“ç»“æ„
    // class LikeButton {
    //   render() {
    //     // é‡åˆ°çš„å‘ ï¼š returnåè·Ÿçš„è¿”å›ä½“ä¸èƒ½ç©ºè¡Œï¼Œå¦åˆ™ä¸ä¼šè¿”å›æ­£ç¡®ç»“æœ
    //     return 
    //       `
    //       <button class="like-btn">
    //         <span class="like-text">ç‚¹èµ</span>  
    //         <span class="pic">ğŸ‘</span>
    //       </button>
    //       `
    //   }
    // }


    // const wrapper = document.querySelector('.wrapper')
    // const LikeButton1 = new LikeButton()
    // wrapper.innerHTML = LikeButton1.render()

    // const LikeButton2 = new LikeButton()
    // wrapper.innerHTML = LikeButton2.render()


    // ä»¥ä¸Šå†™æ³•æ— æ³•ç»™buttonæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œè€ŒDOMçš„æ·»åŠ äº‹ä»¶çš„APIåªèƒ½ç»™domå…ƒç´ ä½¿ç”¨ï¼Œæ‰€ä»¥æ”¹å†™å¦‚ä¸‹
    // ::String => ::Document
    // const createDOMFromString = (domString) => {
    //   const div = document.createElement('div')
    //   div.innerHTML = domString
    //   return div
    // }

    // class LikeButton {
    //   constructor() {
    //     this.state = { isLiked: false }
    //   }

    //   changLikeText(){
    //     const likeText = this.el.querySelector('.like-text')
    //     this.state.isLiked = !this.state.isLiked
    //     likeText.innerText = this.state.isLiked ? 'ç‚¹èµ':'å–æ¶ˆ' 
    //   }

    //   render() {
    //     this.el = createDOMFromString(
    //       `
    //       <button class="like-btn">
    //         <span class="like-text">ç‚¹èµ</span>  
    //         <span class="pic">ğŸ‘</span>
    //       </button>
    //       `
    //     )
    //     this.el.addEventListener('click',this.changLikeText.bind(this), false)
    //     return this.el
    //   }
    // }

    // const wrapper = document.querySelector('.wrapper')
    // const LikeButton1 = new LikeButton()
    // console.log(LikeButton1);
    // wrapper.appendChild(LikeButton1.render())
    // //--------------------------------------------------- 
    // // è¿™é‡Œæ˜¯æœ‰é—®é¢˜çš„ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„likebutton1å’Œlikebutton2çš„çŠ¶æ€æ˜¯å…¬ç”¨çš„ä¸€ä¸ªï¼Œæ²¡æœ‰æŸ¥åˆ°åŸå› ï¼Œåæ¥å‘ç°æ˜¯ changLikeTextæ–¹æ³•ä¸­çš„liketextå–é”™äº†ï¼Œå»æˆäº†documentä¸­çš„å…ƒç´ 
    // //--------------------------------------------------- 
    // const LikeButton2 = new LikeButton()
    // wrapper.appendChild(LikeButton2.render())
    // console.log(LikeButton2);



    /* 
      ä¼˜åŒ–domæ“ä½œï¼Œå°†domæ“ä½œæ”¾åœ¨æ•°æ®æ›´æ–°ä¹‹å
    
    */
    // const createDOMFromString = (domString) => {
    //   const div = document.createElement('div')
    //   div.innerHTML = domString
    //   return div
    // }

    //  class LikeButton {
    //   constructor() {
    //     this.state = { isLiked: false }
    //   }

    //   setState(state){
    //     const oldDoc = this.el
    //     this.state = state
    //     this.el = this.render()
    //     if(this.onStateChange) this.onStateChange(oldDoc,this.el)
    //   }

    //   changLikeText(){
    //     this.setState({
    //       isLiked:!this.state.isLiked
    //     })
    //   }

    //   render() {
    //     this.el = createDOMFromString(
    //       `
    //       <button class="like-btn">
    //         <span class="like-text">${this.state.isLiked ? 'ç‚¹èµ' : 'å–æ¶ˆ'}</span>  
    //         <span class="pic">ğŸ‘</span>
    //       </button>
    //       `
    //     )
    //     this.el.addEventListener('click',this.changLikeText.bind(this), false)
    //     return this.el
    //   }
    // }

    // const wrapper = document.querySelector('.wrapper')
    // const LikeButton1 = new LikeButton()
    // wrapper.appendChild(LikeButton1.render())
    // LikeButton1.onStateChange = function(oldDoc,newDoc){
    //   wrapper.insertBefore(newDoc,oldDoc)
    //   wrapper.removeChild(oldDoc)
    // }

    // const LikeButton2 = new LikeButton()
    // wrapper.innerHTML = LikeButton2.render()

  
    /* 
      æŠ½è±¡å‡ºå…¬å…±ç»„ä»¶ç±»
    */

     const createDOMFromString = (domString) => {
      const div = document.createElement('div')
      div.innerHTML = domString
      return div
    }

     class Component {
       constructor(props){
        this.props = props
       }
      setState(state){
        const oldDoc = this.el
        this.state = state
        this._renderDOM()
        if(this.onStateChange) this.onStateChange(oldDoc,this.el)
      }
      _renderDOM() {
        this.el = createDOMFromString(this.render())
        if(this.onclick) this.el.addEventListener('click',this.onclick.bind(this), false)
        return this.el
      }
    }

    const mount = (component,wrapper)=>{
      wrapper.appendChild(component._renderDOM())
      component.onStateChange = (oldDoc,newDoc)=>{
        wrapper.insertBefore(newDoc,oldDoc)
        wrapper.removeChild(oldDoc)
      }
    }
    const wrapper = document.querySelector('.wrapper')
    class LikeButton extends Component {
      constructor(props){
        super(props)
        this.state = {
          isLiked: false
        }
      }
      onclick(){
        this.setState({
          isLiked: !this.state.isLiked
        })
      }
      render(){
        return `
          <button class="like-btn">
            <span class="like-text">${this.state.isLiked ? 'ç‚¹èµ' : 'å–æ¶ˆ'}</span>  
            <span class="pic">ğŸ‘</span>
          </button>
        `
      }
    }

    mount(new LikeButton(),wrapper)

  </script>
</body>

</html>